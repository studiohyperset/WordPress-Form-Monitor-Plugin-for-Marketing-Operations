<?php
$template = '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional //EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" style="margin-top: 0px !important; padding-top: 0px !important"><head><style type="text/css">html, body{margin-top: 0px !important; padding-top: 0px !important;}body{background-color:#F6F6F6; margin-top: 0px !important; padding-top: 0px !important; font-family:sans-serif;}table{margin-top: 0px !important; padding-top: 0px !important;}</style><style type="text/css">a img{color:#000001 !important;}.wysiwyg-text-align-right{text-align: right;}.wysiwyg-text-align-center{text-align: center;}.wysiwyg-text-align-left{text-align: left;}.wysiwyg-text-align-justify{text-align: justify;}body{text-shadow:none; padding-top:0; padding-right:0; padding-bottom:0; padding-left:0; margin-top:0; margin-right:0; margin-bottom:0; margin-left:0; color:#000000!important; font-style:normal; font-family:Arial; font-size:14px; line-height:24px;}h1, #email-392092 h1{text-shadow:none; padding-top:0; padding-right:0; padding-bottom:0; padding-left:0; margin-top:0; margin-right:0; margin-bottom:0; margin-left:0; color:#000000!important; font-weight:400; font-style:normal; font-family:Arial; font-size:36px; line-height:44px;}h2, #email-392092 h2{text-shadow:none; padding-top:0; padding-right:0; padding-bottom:0; padding-left:0; margin-top:0; margin-right:0; margin-bottom:0; margin-left:0; color:#000000!important; font-weight:400; font-style:normal; font-family:Arial; font-size:24px; line-height:32px;}h3, #email-392092 h3{text-shadow:none; padding-top:0; padding-right:0; padding-bottom:0; padding-left:0; margin-top:0; margin-right:0; margin-bottom:0; margin-left:0; color:#000000!important; font-weight:400; font-style:normal; font-family:Arial; font-size:15px; line-height:21px;}p, #email-392092 p{text-shadow:none; padding-top:0; padding-right:0; padding-bottom:0; padding-left:0; margin-top:0; margin-right:0; margin-bottom:0; margin-left:0; color:#000000!important; font-style:normal; font-family:Arial; font-size:14px; line-height:24px;}a, #email-392092 a{text-shadow:none; padding-top:0; padding-right:0; padding-bottom:0; padding-left:0; margin-top:0; margin-right:0; margin-bottom:0; margin-left:0; color:#1122CC!important; text-decoration:underline;}.h1_color_span_wrapper{color: #000000;}.h2_color_span_wrapper{color: #000000;}.h3_color_span_wrapper{color: #000000;}.p_color_span_wrapper{color: #000000;}.a_color_span_wrapper{color: #1122CC;}.mi-all{display: block;}.mi-desktop{display: block;}.mi-mobile{display: none;font-size: 0; max-height: 0; line-height: 0; padding: 0;float: left;overflow: hidden;mso-hide: all; /* hide elements in Outlook 2007-2013 */}</style><style type="text/css" >div, p, a, li, td{-webkit-text-size-adjust:none;}@media only screen and (max-device-width: 480px), screen and (max-width: 480px), screen and (orientation: landscape) and (max-width: 630px){/* very important! all except \'all\' and this current type get a display:none; */.mi-desktop{display: none !important;}/* then show the mobile one */.mi-mobile{display: block !important;font-size: 12px !important;max-height: none !important;line-height: 1.5 !important;float: none !important;overflow: visible !important;}}</style> <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/> </head><body id="email-392092" style="background: #F6F6F6; color: #000000 !important; font-family: Arial; font-size: 14px; font-style: normal; line-height: 24px; margin: 0px 0 0 0px; padding: 0px 0 0; text-shadow: none" bgcolor="#F6F6F6"><style type="text/css">body{margin-top: 0px !important; padding-top: 0px !important;}body{background-color: #F6F6F6; margin-top: 0px !important; padding-top: 0px !important; font-family: sans-serif;}body{text-shadow: none; padding-top: 0; padding-right: 0; padding-bottom: 0; padding-left: 0; margin-top: 0; margin-right: 0; margin-bottom: 0; margin-left: 0; color: #000000 !important; font-style: normal; font-family: Arial; font-size: 14px; line-height: 24px;}</style><img src="http://t.inkbrush.com/p/cp/2bd8200129fbac98/o.gif" width="1" height="1"><div class="mi-desktop" style="display: block"><table width="100%" cellspacing="0" cellpadding="0" align="center" style="background: #F6F6F6; border: 0px none; border-collapse: collapse; border-spacing: 0px; margin: 0px; padding: 0px" bgcolor="#F6F6F6"><tbody><tr align="center" style="border: 0px none; border-collapse: collapse; border-spacing: 0px"><td valign="top" align="center" style="border: 0px none; border-collapse: collapse; border-spacing: 0px"><table width="100%" cellspacing="0" cellpadding="0" border="0" align="center" style="border: 0px none; border-collapse: collapse; border-spacing: 0px; margin: 0px; padding: 0px"><tbody><tr align="left" style="border: 0px none; border-collapse: collapse; border-spacing: 0px"><td width="100%"><table width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 0px none; border-collapse: collapse; border-spacing: 0px; margin-top: 0px !important; padding-top: 0px !important"><tbody><tr align="left" style="border: 0px none; border-collapse: collapse; border-spacing: 0px"><td width="100%"><table width="100%" cellspacing="0" cellpadding="0" border="0" style="border: 0px none; border-collapse: collapse; border-spacing: 0px; margin-top: 0px !important; padding-top: 0px !important"><tbody><tr style="border: 0; border-collapse: collapse; border-spacing: 0px; height: 50px"><td width="100%" valign="top" height="50" align="left" style="background: #F6F6F6; font-size: 1px; line-height: 1px" bgcolor="#F6F6F6" class="">&nbsp;</td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></div><table align="center" cellpadding="0" cellspacing="0" width="100%" style="background: #F6F6F6; border: 0; border-collapse: collapse; border-spacing: 0; margin: 0px 0 0; padding: 0px 0 0" bgcolor="#F6F6F6"><tbody><tr align="center" style="border: 0; border-collapse: collapse; border-spacing: 0"><td align="center" valign="top" style="border: 0; border-collapse: collapse; border-spacing: 0" class=""><div class="mi-all" style="display: block"><table align="center" border="0" cellpadding="0" cellspacing="0" class="mi-all" style="border: 0; border-collapse: collapse; border-spacing: 0; display: block; margin: 0px 0 0; min-width: 628px; padding: 0px 0 0" width="628"><tbody><tr align="left" style="border: 0; border-collapse: collapse; border-spacing: 0"><td><table border="0" cellpadding="0" cellspacing="0" style="border: 0; border-collapse: collapse; border-spacing: 0; margin-top: 0px !important; min-width: 628px; padding-top: 0px !important"><tbody><tr style="border: 0; border-collapse: collapse; border-spacing: 0"><td align="left" class="" style="line-height: 0px; mso-line-height-rule: exactly" valign="top"><img border="0" src="https://www.infer.com/html-mailers/plugin-report/images/image-df38089f7f698c88c83c10cea5ffc410d2d09ea0.jpg" style="border: 0; display: block; height: 38px; line-height: 0px; max-height: 38px; max-width: 628px; min-height: 38px; min-width: 628px; width: 628px"></td></tr></tbody></table></td></tr><tr align="left" style="border: 0; border-collapse: collapse; border-spacing: 0"><td><table border="0" cellpadding="0" cellspacing="0" style="border: 0; border-collapse: collapse; border-spacing: 0; margin-top: 0px !important; min-width: 628px; padding-top: 0px !important"><tbody><tr style="border: 0; border-collapse: collapse; border-spacing: 0"><td align="left" class="" style="line-height: 0px; mso-line-height-rule: exactly" valign="top"><a href="https://www.infer.com" style="border: none; color: #1122CC !important; display: block; font-size: 10px; margin-top:0; padding-top:0; margin-right:0; padding-right:0; margin-bottom:0; padding-bottom:0; margin-left:0; padding-left:0; text-decoration: none; text-shadow: none" target="_blank"><img alt="Infer Logo" border="0" src="https://www.infer.com/html-mailers/plugin-report/images/image-a38c12bd024d30ba6bd6f05ecda88b7f8034b5b4.jpg" style="border: 0; color: #000001 !important; display: block; height: 80px; line-height: 0px; max-height: 80px; max-width: 628px; min-height: 80px; min-width: 628px; width: 628px"></a></td></tr></tbody></table></td></tr><tr align="left" style="border: 0; border-collapse: collapse; border-spacing: 0"><td><table border="0" cellpadding="0" cellspacing="0" style="border: 0; border-collapse: collapse; border-spacing: 0; margin-top: 0px !important; min-width: 628px; padding-top: 0px !important"><tbody><tr style="border: 0; border-collapse: collapse; border-spacing: 0"><td align="left" valign="top"><table align="center" border="0" cellpadding="0" cellspacing="0" style="border: 0; border-collapse: collapse; border-spacing: 0; margin: 0px 0 0; min-width: 613px; padding: 0px 0 0"><tbody><tr align="left" style="border: 0; border-collapse: collapse; border-spacing: 0"><td><table background="https://www.infer.com/html-mailers/plugin-report/images/header-bg.jpg" border="0" cellpadding="0" cellspacing="0" style="background-image: url(https://www.infer.com/html-mailers/plugin-report/images/header-bg.jpg); border: 0; border-collapse: collapse; border-spacing: 0; margin-top: 0px !important; min-width: 613px; padding-top: 0px !important"><tbody><tr style="border: 0; border-collapse: collapse; border-spacing: 0"><td align="left" class="" style="line-height: 0px; mso-line-height-rule: exactly" valign="top"><p style="font-size: 24px; line-height: 24px; color: #fff !important; font-family: Arial; font-weight: 700; margin: 0; padding: 37px 50px 0 54px;">###REPORT-TITLE###</p><p style="font-size: 16px; line-height: 22px; color: #d9f6d5 !important; font-family: Arial; margin: 0; padding: 14px 50px 20px 54px;">###REPORT-DATE###</p></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></td></tr><tr align="left" style="border: 0; border-collapse: collapse; border-spacing: 0"><td><table border="0" cellpadding="0" cellspacing="0" style="border: 0; border-collapse: collapse; border-spacing: 0; margin-top: 0px !important; min-width: 628px; padding-top: 0px !important"><tbody><tr style="border: 0; border-collapse: collapse; border-spacing: 0"><td align="left" class="" style="line-height: 0px; mso-line-height-rule: exactly" valign="top"><img border="0" src="https://www.infer.com/html-mailers/plugin-report/images/image-f013ff930ebff2769f4397db4c70bf737feb3ab0.jpg" style="border: 0; display: block; height: 147px; line-height: 0px; max-height: 147px; max-width: 53px; min-height: 147px; min-width: 53px; width: 53px"></td><td align="left" bgcolor="#FFFFFF" class="" height="147" style="background: #FFFFFF" valign="middle" width="521"><p style="color: #000000 !important; font-family: Arial; font-size: 16px; font-style: normal; line-height: 22px; margin-top:0; padding-top:0; margin-right:0; padding-right:0; margin-bottom:0; padding-bottom:0; margin-left:0; padding-left:0; text-shadow: none">&nbsp;</p><p style="font-family: Arial; font-size: 16px; color: #808080 !important; line-height: 22px;">Infer is a predictive sales and marketing platform. We help B2B companies transform their data into actionable intelligence to guide you what to do next. Learn more at <a href="https://www.infer.com/" target="_blank">infer.com</a></p></td><td align="left" class="" style="line-height: 0px; mso-line-height-rule: exactly" valign="top"><img border="0" src="https://www.infer.com/html-mailers/plugin-report/images/image-24607bb0eb9b95b805dbbefaaa3b633541680d3b.jpg" style="border: 0; display: block; height: 147px; line-height: 0px; max-height: 147px; max-width: 54px; min-height: 147px; min-width: 54px; width: 54px"></td></tr></tbody></table></td></tr><tr align="left" style="border: 0; border-collapse: collapse; border-spacing: 0"><td><table border="0" cellpadding="0" cellspacing="0" style="border: 0; border-collapse: collapse; border-spacing: 0; margin-top: 0px !important; min-width: 628px; padding-top: 0px !important"><tbody><tr style="border: 0; border-collapse: collapse; border-spacing: 0"><td align="left" class="" style="line-height: 0px; mso-line-height-rule: exactly" valign="top"><img border="0" src="https://www.infer.com/html-mailers/plugin-report/images/image-7477f7ee70a196b023da55ee407629756e4fc721.jpg" style="border: 0; display: block; height: 100%; line-height: 0px; max-height: 100%; max-width: 54px; min-height: 100%; min-width: 54px; width: 54px"></td><td align="left" valign="top"><table align="center" border="0" cellpadding="0" cellspacing="0" style="border: 0; border-collapse: collapse; border-spacing: 0; margin: 0px 0 0; min-width: 520px; padding: 0px 0 0"><tbody><tr align="left" style="border: 0; border-collapse: collapse; border-spacing: 0"><td><table border="0" cellpadding="0" cellspacing="0" style="border: 0; border-collapse: collapse; border-spacing: 0; margin-top: 0px !important; min-width: 520px; padding-top: 0px !important"><tbody><tr style="border: 0; border-collapse: collapse; border-spacing: 0"><td align="left" class="" style="line-height: 0px; mso-line-height-rule: exactly" valign="top"><img alt="URL and Status" border="0" src="https://www.infer.com/html-mailers/plugin-report/images/image-8b06362e71eb97cd1c31ce71cc8d71a1462ef61d.jpg" style="border: 0; display: block; height: 47px; line-height: 0px; max-height: 47px; max-width: 520px; min-height: 47px; min-width: 520px; width: 520px"></td></tr><tr><td><table border="0" cellpadding="0" cellspacing="0" style="border: 0; border-collapse: collapse; border-spacing: 0; margin-top: 0px !important; min-width: 520px; padding-top: 0px !important">###REPORT-ENTRY-URL###</table></td></tr></tbody></table></td></tr></tbody></table></td><td align="left" class="" style="line-height: 0px; mso-line-height-rule: exactly" valign="top"><img border="0" src="https://www.infer.com/html-mailers/plugin-report/images/image-eb7f2a3a8710cbd2dc96af8f38c26f8d5fc774e0.jpg" style="border: 0; display: block; height: 100%; line-height: 0px; max-height: 100%; max-width: 54px; min-height: 100%; min-width: 54px; width: 54px"></td></tr></tbody></table></td></tr><tr align="left" style="border: 0; border-collapse: collapse; border-spacing: 0"><td><table border="0" cellpadding="0" cellspacing="0" style="border: 0; border-collapse: collapse; border-spacing: 0; margin-top: 0px !important; min-width: 628px; padding-top: 0px !important"><tbody><tr style="border: 0; border-collapse: collapse; border-spacing: 0"><td align="left" class="" style="line-height: 0px; mso-line-height-rule: exactly" valign="top"><img border="0" src="https://www.infer.com/html-mailers/plugin-report/images/image-fe5f1e1e07091a7ed032aa5913ee74876ce9f59a.jpg" style="border: 0; display: block; height: 31px; line-height: 0px; max-height: 31px; max-width: 628px; min-height: 31px; min-width: 628px; width: 628px"></td></tr></tbody></table></td></tr><tr align="left" style="border: 0; border-collapse: collapse; border-spacing: 0"><td><table border="0" cellpadding="0" cellspacing="0" style="border: 0; border-collapse: collapse; border-spacing: 0; margin-top: 0px !important; min-width: 628px; padding-top: 0px !important"><tbody><tr style="border: 0; border-collapse: collapse; border-spacing: 0"><td align="left" class="" style="line-height: 0px; mso-line-height-rule: exactly" valign="top"><img border="0" src="https://www.infer.com/html-mailers/plugin-report/images/image-2f80986542a0be20a51ea8d325b586f51b27aa65.jpg" style="border: 0; display: block; height: 60px; line-height: 0px; max-height: 60px; max-width: 172px; min-height: 60px; min-width: 172px; width: 172px"></td><td align="left" class="" style="line-height: 0px; mso-line-height-rule: exactly" valign="top"><a href="###REPORT-LINK###" style="border: none; color: #1122CC !important; display: block; font-size: 10px; margin-top:0; padding-top:0; margin-right:0; padding-right:0; margin-bottom:0; padding-bottom:0; margin-left:0; padding-left:0; text-decoration: none; text-shadow: none" target="_blank"><img alt="Download Report" border="0" src="'. INFERFORMURL . '/assets/img/download-button.jpg" style="border: 0; color: #000001 !important; display: block; height: 60px; line-height: 0px; max-height: 60px; max-width: 284px; min-height: 60px; min-width: 284px; width: 284px"></a></td><td align="left" class="" style="line-height: 0px; mso-line-height-rule: exactly" valign="top"><img border="0" src="https://www.infer.com/html-mailers/plugin-report/images/image-26314273caf3b999a71e8dfea4055789ac5a6fe0.jpg" style="border: 0; display: block; height: 60px; line-height: 0px; max-height: 60px; max-width: 172px; min-height: 60px; min-width: 172px; width: 172px"></td></tr></tbody></table></td></tr><tr align="left" style="border: 0; border-collapse: collapse; border-spacing: 0"><td><table border="0" cellpadding="0" cellspacing="0" style="border: 0; border-collapse: collapse; border-spacing: 0; margin-top: 0px !important; min-width: 628px; padding-top: 0px !important"><tbody><tr style="border: 0; border-collapse: collapse; border-spacing: 0"><td align="left" class="" style="line-height: 0px; mso-line-height-rule: exactly" valign="top"><img border="0" src="https://www.infer.com/html-mailers/plugin-report/images/image-25e0a354716ba248a95570dd29a6673efc00a400.jpg" style="border: 0; display: block; height: 89px; line-height: 0px; max-height: 89px; max-width: 628px; min-height: 89px; min-width: 628px; width: 628px"></td></tr></tbody></table></td></tr><tr align="left" bgcolor="#F6F6F6" style="background: #F6F6F6; border: 0; border-collapse: collapse; border-spacing: 0"><td><table border="0" cellpadding="0" cellspacing="0" style="border: 0; border-collapse: collapse; border-spacing: 0; margin-top: 0px !important; min-width: 628px; padding-top: 0px !important"><tbody><tr style="border: 0; border-collapse: collapse; border-spacing: 0"><td align="center" bgcolor="#F6F6F6" class="" height="112" style="background: #F6F6F6" valign="middle" width="628"><p style="color: #b3b3b3 !important; font-family: Arial; font-size: 11px; font-style: normal; line-height: 24px; margin-top:0; padding-top:0; margin-right:0; padding-right:0; margin-bottom:0; padding-bottom:0; margin-left:0; padding-left:0; text-shadow: none">© 2015 Infer Inc. 444 Castro St. Mountain View, CA 94041</p></td></tr></tbody></table></td></tr><tr align="left" style="border: 0; border-collapse: collapse; border-spacing: 0"><td><table border="0" cellpadding="0" cellspacing="0" style="border: 0; border-collapse: collapse; border-spacing: 0; margin-top: 0px !important; min-width: 628px; padding-top: 0px !important"><tbody><tr style="border: 0; border-collapse: collapse; border-spacing: 0"><td align="left" class="" style="line-height: 0px; mso-line-height-rule: exactly" valign="top"><img border="0" src="https://www.infer.com/html-mailers/plugin-report/images/image-1386caac8507197532f08b2296d87ba91661e549.jpg" style="border: 0; display: block; height: 42px; line-height: 0px; max-height: 42px; max-width: 628px; min-height: 42px; min-width: 628px; width: 628px"></td></tr></tbody></table></td></tr></tbody></table></div></td></tr></tbody></table><div style="display: none; font: 15px courier; white-space: nowrap">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</div></body></html>';

$current = intval($_GET['report']);
$logged = get_option( 'infer_form_monitor_log', array() );
if ( count($logged) > 0 ) {
	$date = date('m/d/Y', $logged[$current]['date']);
	$report = '';
	foreach ($logged[$current]['result'] as $key => $value) {

		if ($value['result'] == 'form_online')
			$color = '#81c784';
		else if ($value['result'] == 'form_offline')
			$color = '#f8e05d';
		else if ($value['result'] == 'form_not_present')
			$color = '#ff7043';
		else if ($value['result'] == 'url_offline')
			$color = '#bb502e';

		$report .= '<tr align="left" style="border: 0; border-collapse: collapse; border-spacing: 0"><td><table cellspacing="0" cellpadding="0" border="0" style="border: 0; border-collapse: collapse; border-spacing: 0; margin-top: 0px !important; min-width: 520px; padding-top: 0px !important"><tbody><tr style="border: 0; border-collapse: collapse; border-spacing: 0"><td width="405" align="left" valign="middle" height="67" class=""><p style="color: #000000 !important; font-family: Arial; font-size: 16px; font-style: normal; line-height: 24px; margin: 0; padding: 0 0 0 22px; text-shadow: none">'. $value['url'] .'</p></td><td width="115" align="center" valign="middle" height="67" class=""><span style="background: '. $color .'; border-radius: 100%; display: inline-block; height: 16px; width: 16px"></span></td></tr></tbody></table></td></tr>';
	}
}

$find = array( '###REPORT-TITLE###', '###REPORT-DATE###', '###REPORT-ENTRY-URL###', '###REPORT-LINK###' );
$replace = array( 'Form Monitor Report', $date, $report, 'javascript:window.print()' );
$template = str_replace($find, $replace, $template);

echo $template;